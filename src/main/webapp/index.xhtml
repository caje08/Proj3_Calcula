<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html">

<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Calculadora: <ui:insert name="title">Padrão</ui:insert></title>
	<h:outputStylesheet library="css" name="style.css" />
	<h:outputStylesheet library="css" name="tablestyle.css" />
	<link rel="stylesheet"
		href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />
	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script
		src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>



</h:head>

<h:body class="layout">

	<f:ajax render="@all">
		<div id="page">

			<div id="container">

				<div class="row">
					<div class="col-md-3" id="col-lado"></div>
					<div class="col-md-6" id="col-center">

						<h:form id="operacoes">

							<h1 class="title">CALCULADORA PADRÃO</h1>

							<h:outputText value="Padrão " style="color:#666" />
							<h:commandLink class="mudapg" value="Científica" action="calc2" />
							<h:outputText value="   OLÁ  " style="color:#fff" />

							<h:panelGroup
								rendered="#{!login.validRegComplete or (!login.isUsernameValid or !login.isPasswordValid)}"
								action="login">
								<h:outputText value="Nome de utilizador não válido !"
									rendered="#{!login.isUsernameValid}" style="color:red"
									action="login"></h:outputText>

							</h:panelGroup>>

								<h:outputLabel value="#{login.username}" style="color:#fff" />
							<h:commandLink class="mudapg"
								style="font-color:red; font-size:15px" value="    logout"
								action="#{login.userLogout}" />

							<br />
							<h:selectOneRadio styleClass="rdbtn" id="basica"
								value="#{calculadora.basica}">
								<f:selectItem id="btnrad1" itemValue='true' itemLabel="Básica " />
								<f:selectItem id="btnrad2" itemValue='false'
									itemLabel="Científica" />

							</h:selectOneRadio>
							<br />
							<br />
							<h:selectOneRadio styleClass="rdbtn" id="loginusr"
								value="#{calculadora.loginusr}">
								<f:selectItem id="btnlog1" itemValue='true' itemLabel="login " />
								<f:selectItem id="btnlog2" itemValue='false'
									itemLabel="Definir Novo Registo" />

							</h:selectOneRadio>
							<br />

							<h:panelGrid id="panel" columns="5" border="1" cellpadding="10"
								cellspacing="1" rendered="#{calculadora.basica=='true'}">
								<f:facet name="header">
									<h:outputLabel for="paramtext" />
									<h:inputText class="input-box" id="paramtext"
										value="#{calculadora.paramtext}" />
								</f:facet>

								<h:commandButton class="btns-op" />
								<h:commandButton class="btns-op" id="ce" value="CE" />
								<h:commandButton class="btns-op" id="clear" value="C"
									actionListener="#{calculadora.keyAdd}" />
								<h:commandButton class="btns-op" id="bcksp" value="&larr;"
									actionListener="#{calculadora.keyAdd}" />
								<h:commandButton class="btns-op" id="divis" value="&#247;"
									actionListener="#{calculadora.keyAdd}" style="font-size:25px" />
								<h:commandButton class="btns-op" id="maismenos" value="+/-"
									actionListener="#{calculadora.keyAdd}" />
								<h:commandButton class="btnsnmb" id="n7" value="7"
									actionListener="#{calculadora.keyAdd}" />
								<h:commandButton class="btnsnmb" id="n8" value="8"
									actionListener="#{calculadora.keyAdd}" />
								<h:commandButton class="btnsnmb" id="n9" value="9"
									actionListener="#{calculadora.keyAdd}" />
								<h:commandButton class="btns-op2" id="multip" value="x"
									actionListener="#{calculadora.keyAdd}" />

								<h:commandButton class="btns-op" id="sqrt" value="&radic;"
									actionListener="#{calculadora.keyAdd}" />
								<h:commandButton class="btnsnmb" id="n4" value="4"
									actionListener="#{calculadora.keyAdd}" />
								<h:commandButton class="btnsnmb" id="n5" value="5"
									actionListener="#{calculadora.keyAdd}" />
								<h:commandButton class="btnsnmb" id="n6" value="6"
									actionListener="#{calculadora.keyAdd}" />
								<h:commandButton class="btns-op2" id="menos" value="-"
									actionListener="#{calculadora.keyAdd}" style="font-size:25px" />
								<h:commandButton class="btns-op" id="percent" value="%"
									actionListener="#{calculadora.keyAdd}" />
								<h:commandButton class="btnsnmb" id="n1" value="1"
									actionListener="#{calculadora.keyAdd}" />
								<h:commandButton class="btnsnmb" id="n2" value="2"
									actionListener="#{calculadora.keyAdd}" />
								<h:commandButton class="btnsnmb" id="n3" value="3"
									actionListener="#{calculadora.keyAdd}" />
								<h:commandButton class="btns-op2" id="mais" value="+"
									actionListener="#{calculadora.keyAdd}" />

								<h:commandButton class="btns-op" id="umdivx" value="1/x"
									actionListener="#{calculadora.keyAdd}" />
								<h:commandButton class="btnsnmb" id="n0" value="0"
									actionListener="#{calculadora.keyAdd}" />
								<h:commandButton class="btns-op2" id="ponto" value="."
									actionListener="#{calculadora.keyAdd}" style="size:150%" />
								<h:commandButton class="btns-equal" id="igual" value="="
									actionListener="#{calculadora.keyAdd}" />
								<h:commandButton class="btns-op" />
							</h:panelGrid>
							<br />

							<br />
							<h4 class="title-est">Histórico de Operações</h4>

							<div style="width: 770px; height: 100px; overflow: auto;">

								<h:dataTable value="#{calculadora.historico}" var="operacao"
									class="historico" rowClasses="order-table-odd-row">


									<h:column style="text-align:center">
										<f:facet name="header" style="margin:20px"> ID </f:facet>
										<h:outputText value="#{operacao.id}" style="margin:20px" />
									</h:column>

									<h:column>
										<f:facet name="header" style="margin:20px"> Operação </f:facet>
										<h:commandLink class="liga"
											action="#{calculadora.noDisplay(operacao.comando)}"
											value="#{operacao.comando}" style="margin:20px" />
									</h:column>

									<h:column>
										<f:facet class="coluna" name="header" style="margin:20px"> Resultado </f:facet>
										<h:commandLink class="liga"
											action="#{calculadora.noDisplay(operacao.resultado)}"
											value="#{operacao.resultado}" style="margin:20px" />
									</h:column>
									<h:column>
										<f:facet class="coluna" name="header" style="margin:20px"> Tempo Processamento (&#181;s) </f:facet>
										<h:outputText value="#{operacao.avgTime}" style="margin:20px" />
									</h:column>
									<h:column>
										<h:commandLink value="x  "
											actionListener="#{calculadora.doEliminar(operacao)}"
											style="color:red" />
									</h:column>

								</h:dataTable>
							</div>

							<h4 class="title-est">Histórico de Mensagens</h4>
							<br />
							<h:form id="chatarray">
								<div style="width: 770px; height: 100px; overflow: auto;">

									<h:dataTable value="#{chatarray.store}" var="msgs"
										class="historico" rowClasses="order-table-odd-row">


										<h:column style="text-align:center">
											<f:facet name="header" style="margin:20px"> UserID </f:facet>
											<h:outputText value="#{msgs.userID}" style="margin:20px" />
										</h:column>

										<h:column>
											<f:facet name="header" style="margin:20px"> Data e Hora </f:facet>
											<h:outputText value="#{msgs.dataehora}" style="margin:20px" />
										</h:column>

										<h:column>
											<f:facet class="coluna" name="header" style="margin:20px"> Mensagem </f:facet>
											<h:outputText value="#{msgs.usermsg}" style="margin:20px" />
										</h:column>

									</h:dataTable>
								</div>
								<br />

								<table class="chatTable">
									<tr>
										<td><h:outputText value="Mensagem a enviar: "
												style="color:white; font:15px" /></td>
										<td><h:inputText id="mensagemuser"
												value="#{calculadora.usrmsg}" /> <h:messages for="usermsg" /></td>
									</tr>

									<tr>
										<td></td>
										<td><h:commandButton value="Enviar Mensagem"
												action="#{calculadora.enviarMsg(login.username)}"
												style="color:green; font:15px" /></td>
										<td><h:commandButton value="Limpar Mensagem"
												action="#{calculadora.limparUserMsg}"
												style="color:red; font:15px" /></td>
									</tr>
								</table>

							</h:form>
						</h:form>

					</div>

					<f:ajax render="@form" ajaxRendered="true">
						<div class="col-md-3" id="col-lado" style="margin-top: 210px">
							<h4 class="title-est">Estatística</h4>
							<h:dataTable class="side-box">

								<h:column>
									<f:facet name="header"> Operação </f:facet>
								</h:column>
								<h:column>
									<f:facet name="header"> Qtd </f:facet>
								</h:column>
							</h:dataTable>


							<h:form id="stats">
								<div style="width: 190px; height: 210px; overflow: auto;">
									<h:dataTable class="side-box" value="#{stats.estatisticas}"
										var="opst" rowClasses="order-table-odd-row">

										<h:column>

											<h:outputText value="#{opst.comando}" />
										</h:column>

										<h:column>

											<h:outputText value="#{opst.id}" />
										</h:column>

									</h:dataTable>
								</div>
							</h:form>


							<div id="footer" style="margin-top: 100px">
								<p>© Copyright Maio 2015, Coimbra</p>
								<p>Carlos Santos | Catarina Lapo</p>
								<p>Trabalho 3 PAJ</p>
							</div>
						</div>
					</f:ajax>
				</div>
			</div>

		</div>
	</f:ajax>
</h:body>
</html>
